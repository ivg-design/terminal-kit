<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TButtonLit - Component Demo</title>
    <script src="../js/utils/accent-init.js"></script>
    <link rel="stylesheet" href="../css/demo-template.css">
</head>
<body>
    <!-- Fixed Header -->
    <header class="demo-header">
        <div class="demo-header-content">
            <div class="demo-header-left">
                <h1>TButtonLit</h1>
                <div class="breadcrumb">
                    <a href="index.html">← Components</a> / Buttons
                </div>
            </div>
            <div class="demo-header-controls">
                <button class="header-btn" id="toggleLogBtn">▼ Event Log</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="demo-container">
        <div class="component-section">
            <h2 class="component-title">Terminal Buttons</h2>
            <p class="component-description">
                Versatile button component with variants, sizes, loading states, and toggle functionality.
            </p>

            <h3>Button Variants</h3>
            <div class="demo-grid">
                <div class="demo-item centered">
                    <span class="demo-label">Primary</span>
                    <t-btn variant="primary">Primary</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Secondary</span>
                    <t-btn variant="secondary">Secondary</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Danger</span>
                    <t-btn variant="danger">Delete</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Error</span>
                    <t-btn variant="error">Error</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Warning</span>
                    <t-btn variant="warning">Warning</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Info</span>
                    <t-btn variant="info">Info</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Success</span>
                    <t-btn variant="success">Success</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Ghost</span>
                    <t-btn variant="ghost">Ghost</t-btn>
                </div>
            </div>

            <h3>Button Sizes</h3>
            <div class="demo-grid">
                <div class="demo-item centered">
                    <span class="demo-label">XS (Icon Only)</span>
                    <t-btn size="xs" variant="primary" type="icon" id="xsIconBtn"></t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Small</span>
                    <t-btn size="small" variant="primary">Small</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Default</span>
                    <t-btn variant="primary">Default</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Large</span>
                    <t-btn size="large" variant="primary">Large</t-btn>
                </div>
            </div>

            <h3>Button Types</h3>
            <div class="demo-grid">
                <div class="demo-item centered">
                    <span class="demo-label">Text Only</span>
                    <t-btn type="text" variant="primary">Text Only</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Icon + Text</span>
                    <t-btn type="icon-text" variant="primary" id="iconTextBtn">Save</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Icon Only</span>
                    <t-btn type="icon" variant="primary" id="iconOnlyBtn"></t-btn>
                </div>
            </div>

            <h3>Button States</h3>
            <div class="demo-grid">
                <div class="demo-item centered">
                    <span class="demo-label">Loading State</span>
                    <t-btn id="loadingBtn" variant="primary">Click Me</t-btn>
                    <t-btn size="small" variant="secondary" onclick="toggleLoading()">Toggle Loading</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Disabled State</span>
                    <t-btn disabled variant="primary">Disabled</t-btn>
                </div>
            </div>

            <h3>Toggle Buttons</h3>
            <div class="demo-grid">
                <div class="demo-item centered">
                    <span class="demo-label">Primary Toggle</span>
                    <t-btn variant="toggle" toggle-variant="primary" text-off="Enable" text-on="Disable" id="primaryToggle">Toggle Me</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Secondary Toggle</span>
                    <t-btn variant="toggle" toggle-variant="secondary" text-off="Start" text-on="Stop" id="secondaryToggle">Secondary</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Custom Colors</span>
                    <t-btn variant="toggle" color-on="#ff0041" color-off="#ffcc00" text-off="Record" text-on="Recording" id="colorToggle">Record</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Icon Toggle</span>
                    <t-btn variant="toggle" toggle-variant="primary" type="icon" id="playPauseToggle"></t-btn>
                </div>
            </div>

            <h3>Loader Types</h3>
            <div class="demo-grid">
                <div class="demo-item centered">
                    <span class="demo-label">Spinner</span>
                    <t-btn loading loader-type="spinner" variant="primary">Loading</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Dots</span>
                    <t-btn loading loader-type="dots" variant="primary">Loading</t-btn>
                </div>
                <div class="demo-item centered">
                    <span class="demo-label">Bars</span>
                    <t-btn loading loader-type="bars" variant="primary">Loading</t-btn>
                </div>
            </div>

            <div class="code-block">
                <code>&lt;!-- Button variants --&gt;
&lt;t-btn variant="primary"&gt;Primary&lt;/t-btn&gt;
&lt;t-btn variant="danger"&gt;Delete&lt;/t-btn&gt;
&lt;t-btn variant="error"&gt;Error&lt;/t-btn&gt;
&lt;t-btn variant="ghost"&gt;Ghost&lt;/t-btn&gt;

&lt;!-- Sizes --&gt;
&lt;t-btn size="small"&gt;Small&lt;/t-btn&gt;
&lt;t-btn size="large"&gt;Large&lt;/t-btn&gt;

&lt;!-- With icon --&gt;
&lt;t-btn type="icon-text" id="saveBtn"&gt;Save&lt;/t-btn&gt;

&lt;!-- Loading state --&gt;
&lt;t-btn loading loader-type="dots"&gt;Processing&lt;/t-btn&gt;

&lt;!-- Toggle button --&gt;
&lt;t-btn variant="toggle" text-off="Start" text-on="Stop"&gt;&lt;/t-btn&gt;</code>
            </div>
        </div>
    </div>

    <!-- Floating Event Log -->
    <div class="event-log-container collapsed" id="eventLogContainer">
        <div class="event-log-toggle">
            <h3><span class="toggle-icon">▲</span> Event Log</h3>
            <div class="event-log-controls">
                <span class="event-log-count">0</span>
                <button class="event-log-clear">Clear</button>
            </div>
        </div>
        <div class="event-log" id="eventLog"></div>
    </div>

    <script type="module">
        import '../js/components/TButtonLit.js';
        import { gearSixIcon, floppyDiskIcon, playIconFill, pauseIconFill } from '../js/utils/phosphor-icons.js';

        // Event log functionality
        let eventCount = 0;
        const eventLog = document.getElementById('eventLog');
        const eventLogContainer = document.getElementById('eventLogContainer');
        const countEl = document.querySelector('.event-log-count');
        const toggleLogBtn = document.getElementById('toggleLogBtn');

        function logEvent(component, event, detail) {
            const entry = document.createElement('div');
            entry.className = 'event-entry';
            const timestamp = new Date().toLocaleTimeString();
            entry.textContent = `[${timestamp}] ${component}: ${event}${detail ? ' - ' + JSON.stringify(detail) : ''}`;
            eventLog.appendChild(entry);
            eventLog.scrollTop = eventLog.scrollHeight;
            eventCount++;
            countEl.textContent = eventCount;
        }

        // Toggle event log
        document.querySelector('.event-log-toggle').addEventListener('click', (e) => {
            if (e.target.closest('.event-log-clear')) return;
            eventLogContainer.classList.toggle('collapsed');
            toggleLogBtn.classList.toggle('active');
        });

        toggleLogBtn.addEventListener('click', () => {
            eventLogContainer.classList.toggle('collapsed');
            toggleLogBtn.classList.toggle('active');
        });

        // Clear log
        document.querySelector('.event-log-clear').addEventListener('click', (e) => {
            e.stopPropagation();
            eventLog.innerHTML = '';
            eventCount = 0;
            countEl.textContent = '0';
        });

        // Initialize buttons
        customElements.whenDefined('t-btn').then(() => {
            const xsIconBtn = document.getElementById('xsIconBtn');
            if (xsIconBtn) xsIconBtn.setIcon(gearSixIcon);

            const iconTextBtn = document.getElementById('iconTextBtn');
            if (iconTextBtn) iconTextBtn.setIcon(floppyDiskIcon);

            const iconOnlyBtn = document.getElementById('iconOnlyBtn');
            if (iconOnlyBtn) iconOnlyBtn.setIcon(gearSixIcon);

            const playPauseBtn = document.getElementById('playPauseToggle');
            if (playPauseBtn) {
                playPauseBtn.setAttribute('icon-off', playIconFill);
                playPauseBtn.setAttribute('icon-on', pauseIconFill);
                playPauseBtn.setIcon(playIconFill);
            }

            logEvent('System', 'Demo initialized');
        });

        // Loading toggle
        window.toggleLoading = function() {
            const btn = document.getElementById('loadingBtn');
            btn.loading = !btn.loading;
            logEvent('loadingBtn', 'loading-toggle', { loading: btn.loading });
        }

        // Listen for button clicks
        document.querySelectorAll('t-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const id = btn.id || btn.textContent.trim();
                logEvent(id, 'click');
            });
        });

        // Listen for toggle events
        document.addEventListener('toggle-change', (e) => {
            const id = e.target.id || 'toggle';
            logEvent(id, 'toggle-change', { state: e.detail.state });
        });
    </script>
    <script type="module" src="../js/utils/demo-color-picker.js"></script>
</body>
</html>
