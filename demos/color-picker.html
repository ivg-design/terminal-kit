<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TColorPickerLit - Component Demo</title>

    <!-- Demo Template Styles -->
    <script src="../js/utils/accent-init.js"></script>
    <link rel="stylesheet" href="../css/demo-template.css">

    <!-- Load CSS -->
    <link rel="stylesheet" href="../css/theme.css">
    <link rel="stylesheet" href="../css/components/t-clr-iro.css">

    <style>
        .demo-grid {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }
    </style>
</head>
<body>
    <!-- Fixed Header -->
    <header class="demo-header">
        <div class="demo-header-content">
            <div class="demo-header-left">
                <h1>TColorPickerLit</h1>
                <div class="breadcrumb">
                    <a href="index.html">← Components</a> / Color Picker
                </div>
            </div>
            <div class="demo-header-controls">
                <button class="header-btn" id="toggleLogBtn">▼ Event Log</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="demo-container">
        <div class="component-section">
            <h2 class="component-title">Color Picker</h2>
            <p class="component-description">
                Systematic color picker with configurable elements. Three variants: large (48px), standard (32px), compact (swatch+input only). Elements are orderable and optional.
            </p>

            <h3>Large Variant (48px height)</h3>
            <p class="component-description">All elements available: icon, label, swatch, input. Swatch is mandatory.</p>
            <div class="demo-grid">
                <div class="demo-item">
                    <span class="demo-label">All Elements (Default)</span>
                    <t-clr value="#00ff41" label1="Theme" label2="Color" elements="icon,label,swatch,input"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Icon + Swatch Only</span>
                    <t-clr value="#00aaff" elements="icon,swatch"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Label + Swatch Only</span>
                    <t-clr value="#ff00ff" label1="Accent" label2="Color" elements="label,swatch"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Swatch + Input Only</span>
                    <t-clr value="#ffcc00" elements="swatch,input"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Reordered: Swatch First</span>
                    <t-clr value="#ff0041" label1="Error" label2="Color" elements="swatch,icon,label,input"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Disabled</span>
                    <t-clr value="#ff3333" label1="Disabled" label2="Color" elements="icon,label,swatch,input" disabled></t-clr>
                </div>
            </div>

            <h3>Standard Variant (32px height)</h3>
            <p class="component-description">All elements available: icon, label, swatch, input. More compact sizing.</p>
            <div class="demo-grid">
                <div class="demo-item">
                    <span class="demo-label">All Elements</span>
                    <t-clr value="#00ff41" label1="Theme" label2="Color" variant="standard" elements="icon,label,swatch,input"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Icon + Swatch Only</span>
                    <t-clr value="#00aaff" variant="standard" elements="icon,swatch"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Label + Swatch Only</span>
                    <t-clr value="#ff00ff" label1="Accent" label2="Color" variant="standard" elements="label,swatch"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Swatch + Input Only</span>
                    <t-clr value="#ffcc00" variant="standard" elements="swatch,input"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Reordered: Swatch First</span>
                    <t-clr value="#ffcc00" label1="Warning" label2="Color" variant="standard" elements="swatch,icon,label,input"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Disabled</span>
                    <t-clr value="#ff0041" label1="Error" label2="Color" variant="standard" elements="icon,label,swatch,input" disabled></t-clr>
                </div>
            </div>

            <h3>Compact Variant (Minimal)</h3>
            <p class="component-description">All elements available. Ultra-compact design for inline use.</p>
            <div class="demo-grid">
                <div class="demo-item">
                    <span class="demo-label">Swatch + Input (Default Order)</span>
                    <t-clr value="#00ff41" variant="compact" elements="swatch,input"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Input + Swatch (Reversed)</span>
                    <t-clr value="#00aaff" variant="compact" elements="input,swatch"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Swatch Only</span>
                    <t-clr value="#ff00ff" variant="compact" elements="swatch"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Icon + Swatch</span>
                    <t-clr value="#ff0041" variant="compact" elements="icon,swatch" id="compactIcon1"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Icon + Label + Swatch</span>
                    <t-clr value="#00ccff" variant="compact" elements="icon,label,swatch" label1="Compact" label2="Picker" id="compactIcon2"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">All Elements</span>
                    <t-clr value="#ffaa00" variant="compact" elements="icon,label,swatch,input" label1="Full" label2="Compact" id="compactIcon3"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Label + Swatch + Input</span>
                    <t-clr value="#aa00ff" variant="compact" elements="label,swatch,input" label1="Color" label2="Value"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">Disabled</span>
                    <t-clr value="#ffcc00" variant="compact" elements="swatch,input" disabled></t-clr>
                </div>
            </div>

            <h3>Advanced Features</h3>
            <p class="component-description">Custom icons, clear button, and picker options.</p>
            <div class="demo-grid">
                <div class="demo-item">
                    <span class="demo-label">Custom Icon (via JS)</span>
                    <t-clr id="customIconPicker" value="#ff0041" label1="Paint" label2="Bucket" elements="icon,label,swatch,input"></t-clr>
                </div>
                <div class="demo-item">
                    <span class="demo-label">With Clear Button</span>
                    <t-clr value="#ffcc00" label1="Custom" label2="Swatches" elements="icon,label,swatch,input" show-clear-button></t-clr>
                    <p style="font-size: 10px; color: var(--terminal-gray); margin-top: 8px;">Open picker to see trash button</p>
                </div>
                <div class="demo-item">
                    <span class="demo-label">No Presets (Wheel Only)</span>
                    <t-clr value="#00ff88" label1="Simple" label2="Picker" elements="icon,label,swatch,input" hide-presets></t-clr>
                    <p style="font-size: 10px; color: var(--terminal-gray); margin-top: 8px;">No color swatches, just the wheel</p>
                </div>
                <div class="demo-item">
                    <span class="demo-label">With Close Button</span>
                    <t-clr value="#ff8800" label1="Explicit" label2="Close" elements="icon,label,swatch,input" show-close-button></t-clr>
                    <p style="font-size: 10px; color: var(--terminal-gray); margin-top: 8px;">Shows X button to close picker</p>
                </div>
            </div>

            <div class="code-block">
                <code>// ===== VARIANTS =====
// Three variants: large (48px), standard (32px), compact (minimal)
&lt;t-clr variant="large"&gt;&lt;/t-clr&gt;      // Default
&lt;t-clr variant="standard"&gt;&lt;/t-clr&gt;   // Smaller
&lt;t-clr variant="compact"&gt;&lt;/t-clr&gt;    // Minimal

// ===== ELEMENTS =====
// Four elements: icon, label, swatch (mandatory), input
// Order matters! Elements render in the order specified.

// All elements (default order)
&lt;t-clr elements="icon,label,swatch,input"&gt;&lt;/t-clr&gt;

// Custom order (swatch first)
&lt;t-clr elements="swatch,icon,label,input"&gt;&lt;/t-clr&gt;

// ===== CUSTOM ICON =====
import { paintBucketIcon } from '../js/utils/phosphor-icons.js';
const picker = document.querySelector('t-clr');
picker.setIcon(paintBucketIcon);

// ===== EVENTS =====
picker.addEventListener('change', (e) =&gt; {
    console.log('Color:', e.target.value);
});

picker.addEventListener('color-save', (e) =&gt; {
    console.log('Saved:', e.detail.color);
});

picker.addEventListener('swatches-cleared', () =&gt; {
    console.log('Swatches cleared');
});</code>
            </div>
        </div>
    </div>

    <!-- Floating Event Log -->
    <div class="event-log-container collapsed" id="eventLogContainer">
        <div class="event-log-toggle">
            <h3><span class="toggle-icon">▲</span> Event Log</h3>
            <div class="event-log-controls">
                <span class="event-log-count">0</span>
                <button class="event-log-clear">Clear</button>
            </div>
        </div>
        <div class="event-log" id="eventLog"></div>
    </div>

    <!-- Import Components -->
    <script type="module">
        import '../js/components/TColorPickerLit.js';
        import { paintBucketIcon } from '../js/utils/phosphor-icons.js';

        // Event log functionality
        let eventCount = 0;
        const eventLog = document.getElementById('eventLog');
        const eventLogContainer = document.getElementById('eventLogContainer');
        const countEl = document.querySelector('.event-log-count');
        const toggleLogBtn = document.getElementById('toggleLogBtn');

        function logEvent(component, event, detail) {
            const entry = document.createElement('div');
            entry.className = 'event-entry';
            const timestamp = new Date().toLocaleTimeString();
            entry.textContent = `[${timestamp}] ${component}: ${event}${detail ? ' - ' + JSON.stringify(detail) : ''}`;
            eventLog.appendChild(entry);
            eventLog.scrollTop = eventLog.scrollHeight;
            eventCount++;
            countEl.textContent = eventCount;
        }

        // Toggle event log
        document.querySelector('.event-log-toggle').addEventListener('click', (e) => {
            if (e.target.closest('.event-log-clear')) return;
            eventLogContainer.classList.toggle('collapsed');
            toggleLogBtn.classList.toggle('active');
        });

        toggleLogBtn.addEventListener('click', () => {
            eventLogContainer.classList.toggle('collapsed');
            toggleLogBtn.classList.toggle('active');
        });

        // Clear log
        document.querySelector('.event-log-clear').addEventListener('click', (e) => {
            e.stopPropagation();
            eventLog.innerHTML = '';
            eventCount = 0;
            countEl.textContent = '0';
        });

        // Setup event listeners after components are defined
        customElements.whenDefined('t-clr').then(() => {
            // Set custom icon for main demo
            const customIconPicker = document.getElementById('customIconPicker');
            if (customIconPicker) {
                customIconPicker.setIcon(paintBucketIcon);
            }

            // Set icons for compact variant demos
            const compactIcon1 = document.getElementById('compactIcon1');
            const compactIcon2 = document.getElementById('compactIcon2');
            const compactIcon3 = document.getElementById('compactIcon3');

            if (compactIcon1) compactIcon1.setIcon(paintBucketIcon);
            if (compactIcon2) compactIcon2.setIcon(paintBucketIcon);
            if (compactIcon3) compactIcon3.setIcon(paintBucketIcon);

            // Add event listeners
            document.querySelectorAll('t-clr').forEach((picker, index) => {
                picker.addEventListener('change', (e) => {
                    const label = e.target.getAttribute('label1') || `Picker ${index + 1}`;
                    logEvent(label, 'change', { value: e.target.value });
                });

                picker.addEventListener('color-save', (e) => {
                    const label = e.target.getAttribute('label1') || `Picker ${index + 1}`;
                    logEvent(label, 'color-save', e.detail);
                });

                picker.addEventListener('swatches-updated', (e) => {
                    logEvent('Swatches', 'swatches-updated', { count: e.detail.swatches.length });
                });

                picker.addEventListener('swatches-cleared', () => {
                    logEvent('Swatches', 'swatches-cleared');
                });
            });

            logEvent('System', 'Demo initialized');
        }).catch((err) => {
            logEvent('System', 'Error', { message: err.message });
        });
    </script>
    <script type="module" src="../js/utils/demo-color-picker.js"></script>
</body>
</html>
