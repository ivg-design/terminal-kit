<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TStatusBarLit - Component Demo</title>

    <!-- Demo Template Styles -->
    <script src="../js/utils/accent-init.js"></script>
    <link rel="stylesheet" href="../css/demo-template.css">

    <style>
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }

        .control-group {
            background: var(--terminal-gray-medium);
            padding: 10px;
            border: 1px solid var(--terminal-gray-light);
        }

        .control-group label {
            display: block;
            font-size: 10px;
            color: var(--terminal-green-dim);
            margin-bottom: 5px;
        }

        .control-group select,
        .control-group input[type="checkbox"] {
            width: 100%;
            background: var(--terminal-gray-dark);
            color: var(--terminal-green);
            border: 1px solid var(--terminal-gray-light);
            padding: 2px;
            margin-bottom: 5px;
            font-family: var(--font-mono);
            font-size: 11px;
        }

        .control-group input[type="checkbox"] {
            width: auto;
            margin-right: 5px;
        }

        .status-bar-demo {
            margin-bottom: 20px;
        }

        .status-bar-controls {
            margin-top: 15px;
            padding: 10px;
            border: 1px solid var(--terminal-gray-light);
            background: var(--terminal-gray-medium);
        }

        .button-row {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            align-items: center;
            min-height: 36px;
        }
    </style>
</head>
<body>
    <!-- Fixed Header -->
    <header class="demo-header">
        <div class="demo-header-content">
            <div class="demo-header-left">
                <h1>TStatusBarLit</h1>
                <div class="breadcrumb">
                    <a href="index.html">← Components</a> / Status Bar
                </div>
            </div>
            <div class="demo-header-controls">
                <button class="header-btn" id="toggleLogBtn">▼ Event Log</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="demo-container">
        <div class="component-section">
            <h2 class="component-title">Status Bar</h2>
            <p class="component-description">
                Flexible status bar with alignment zones (left/center/right), automatic width validation, and marquee scrolling. Built with LitElement.
            </p>

            <h3>Basic Status Bar</h3>
            <p class="component-description">Status bar with percentage widths for stable layout.</p>
            <div class="demo-item status-bar-demo">
                <span class="demo-label">Basic Status Fields</span>
                <t-sta id="statusBar1"></t-sta>
            </div>

            <h3>Interactive Configuration</h3>
            <p class="component-description">Configure status fields dynamically.</p>
            <div class="demo-item status-bar-demo">
                <span class="demo-label">Interactive Status Bar</span>
                <t-sta id="statusBar2"></t-sta>

                <div class="status-bar-controls">
                    <div class="controls-grid">
                        <div class="control-group">
                            <label>Field 1 Display:</label>
                            <select id="field1Display">
                                <option value="text">Label + Value</option>
                                <option value="icon">Icon + Value</option>
                                <option value="icon-text" selected>Icon + Label + Value</option>
                                <option value="value">Value Only</option>
                            </select>
                            <label>Width:</label>
                            <select id="field1Width">
                                <option value="auto">Auto</option>
                                <option value="15%">15%</option>
                                <option value="25%">25%</option>
                                <option value="35%" selected>35%</option>
                                <option value="50%">50%</option>
                            </select>
                            <label>Align:</label>
                            <select id="field1Align">
                                <option value="left" selected>Left</option>
                                <option value="center">Center</option>
                                <option value="right">Right</option>
                            </select>
                            <label><input type="checkbox" id="field1Marquee" checked> Enable Marquee</label>
                            <label><input type="checkbox" id="field1Hover" checked> Enable Hover</label>
                            <label><input type="checkbox" id="field1Disabled"> Disabled</label>
                        </div>
                        <div class="control-group">
                            <label>Field 2 Display:</label>
                            <select id="field2Display">
                                <option value="text" selected>Label + Value</option>
                                <option value="icon">Icon + Value</option>
                                <option value="icon-text">Icon + Label + Value</option>
                                <option value="value">Value Only</option>
                            </select>
                            <label>Width:</label>
                            <select id="field2Width">
                                <option value="auto">Auto</option>
                                <option value="15%">15%</option>
                                <option value="25%" selected>25%</option>
                                <option value="35%">35%</option>
                                <option value="50%">50%</option>
                            </select>
                            <label>Align:</label>
                            <select id="field2Align">
                                <option value="left">Left</option>
                                <option value="center" selected>Center</option>
                                <option value="right">Right</option>
                            </select>
                            <label><input type="checkbox" id="field2Marquee"> Enable Marquee</label>
                            <label><input type="checkbox" id="field2Hover" checked> Enable Hover</label>
                            <label><input type="checkbox" id="field2Disabled"> Disabled</label>
                        </div>
                        <div class="control-group">
                            <label>Field 3 Display:</label>
                            <select id="field3Display">
                                <option value="text" selected>Label + Value</option>
                                <option value="icon">Icon + Value</option>
                                <option value="icon-text">Icon + Label + Value</option>
                                <option value="value">Value Only</option>
                            </select>
                            <label>Width:</label>
                            <select id="field3Width">
                                <option value="auto">Auto</option>
                                <option value="15%" selected>15%</option>
                                <option value="25%">25%</option>
                                <option value="35%">35%</option>
                                <option value="50%">50%</option>
                            </select>
                            <label>Align:</label>
                            <select id="field3Align">
                                <option value="left">Left</option>
                                <option value="center">Center</option>
                                <option value="right" selected>Right</option>
                            </select>
                            <label><input type="checkbox" id="field3Marquee"> Enable Marquee</label>
                            <label><input type="checkbox" id="field3Hover" checked> Enable Hover</label>
                            <label><input type="checkbox" id="field3Disabled"> Disabled</label>
                        </div>
                        <div class="control-group">
                            <label>Field 4 Display:</label>
                            <select id="field4Display">
                                <option value="text" selected>Label + Value</option>
                                <option value="icon">Icon + Value</option>
                                <option value="icon-text">Icon + Label + Value</option>
                                <option value="value">Value Only</option>
                            </select>
                            <label>Width:</label>
                            <select id="field4Width">
                                <option value="auto">Auto</option>
                                <option value="15%">15%</option>
                                <option value="25%" selected>25%</option>
                                <option value="35%">35%</option>
                                <option value="50%">50%</option>
                            </select>
                            <label>Align:</label>
                            <select id="field4Align">
                                <option value="left">Left</option>
                                <option value="center">Center</option>
                                <option value="right" selected>Right</option>
                            </select>
                            <label><input type="checkbox" id="field4Marquee"> Enable Marquee</label>
                            <label><input type="checkbox" id="field4Hover" checked> Enable Hover</label>
                            <label><input type="checkbox" id="field4Disabled"> Disabled</label>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Dynamic Status Updates</h3>
            <p class="component-description">Status bar with live updates via JavaScript API.</p>
            <div class="demo-item status-bar-demo">
                <span class="demo-label">Dynamic Status Bar</span>
                <t-sta id="statusBar3"></t-sta>
                <div class="button-row">
                    <t-btn id="startProgressBtn" variant="primary" size="small">Start Progress</t-btn>
                    <t-btn id="updateStatusBtn" variant="secondary" size="small">Cycle Quality</t-btn>
                </div>
            </div>

            <div class="code-block">
                <code>// Initialize status bar with fields
statusBar.setFields([
    {
        label: 'CPU',
        value: '42%',
        width: '25%',
        icon: gaugeIcon,
        displayMode: 'icon-text',
        hover: true,
        marquee: false,
        align: 'left',
        onHover: (field, index, bar) => {
            console.log('Hovering:', field.label);
        }
    },
    { label: 'RAM', value: '1.2GB', width: '25%', icon: packageIcon }
]);

// Update individual field
statusBar.updateField(0, { value: '55%', hover: false });

// Update just the value
statusBar.updateFieldValue(1, '2.4GB');

// Events
statusBar.addEventListener('field-hover', (e) => {
    console.log('Hovering:', e.detail.field.label);
});</code>
            </div>
        </div>
    </div>

    <!-- Floating Event Log -->
    <div class="event-log-container collapsed" id="eventLogContainer">
        <div class="event-log-toggle">
            <h3><span class="toggle-icon">▲</span> Event Log</h3>
            <div class="event-log-controls">
                <span class="event-log-count">0</span>
                <button class="event-log-clear">Clear</button>
            </div>
        </div>
        <div class="event-log" id="eventLog"></div>
    </div>

    <!-- Import Components -->
    <script type="module">
        import '../js/components/TStatusBarLit.js';
        import '../js/components/TButtonLit.js';
        import {
            fileIcon,
            playIcon,
            gaugeIcon,
            gearSixIcon,
            briefcaseIcon,
            packageIcon,
            userCircleIcon,
            fadersIcon
        } from '../js/utils/phosphor-icons.js';

        // Event log functionality
        let eventCount = 0;
        const eventLog = document.getElementById('eventLog');
        const eventLogContainer = document.getElementById('eventLogContainer');
        const countEl = document.querySelector('.event-log-count');
        const toggleLogBtn = document.getElementById('toggleLogBtn');

        function logEvent(component, event, detail) {
            const entry = document.createElement('div');
            entry.className = 'event-entry';
            const timestamp = new Date().toLocaleTimeString();
            entry.textContent = `[${timestamp}] ${component}: ${event}${detail ? ' - ' + JSON.stringify(detail) : ''}`;
            eventLog.appendChild(entry);
            eventLog.scrollTop = eventLog.scrollHeight;
            eventCount++;
            countEl.textContent = eventCount;
        }

        // Toggle event log
        document.querySelector('.event-log-toggle').addEventListener('click', (e) => {
            if (e.target.closest('.event-log-clear')) return;
            eventLogContainer.classList.toggle('collapsed');
            toggleLogBtn.classList.toggle('active');
        });

        toggleLogBtn.addEventListener('click', () => {
            eventLogContainer.classList.toggle('collapsed');
            toggleLogBtn.classList.toggle('active');
        });

        // Clear log
        document.querySelector('.event-log-clear').addEventListener('click', (e) => {
            e.stopPropagation();
            eventLog.innerHTML = '';
            eventCount = 0;
            countEl.textContent = '0';
        });

        // Initialize Status Bars
        const statusBar1 = document.getElementById('statusBar1');
        if (statusBar1) {
            statusBar1.setFields && statusBar1.setFields([
                {
                    label: 'CPU',
                    value: '42%',
                    width: '20%',
                    icon: gaugeIcon,
                    hover: true,
                    onHover: (field) => {
                        logEvent('statusBar1', 'field-hover', { label: field.label });
                    }
                },
                { label: 'RAM', value: '1.2GB / 8GB', width: '30%', icon: packageIcon, hover: true },
                { label: 'Status', value: 'Running', width: '20%', icon: playIcon, hover: false },
                { label: 'User', value: 'Admin', width: '30%', icon: userCircleIcon, hover: true }
            ]);
        }

        const statusBar2 = document.getElementById('statusBar2');
        if (statusBar2) {
            statusBar2.setFields && statusBar2.setFields([
                {
                    label: 'File',
                    value: 'very_long_filename_that_will_scroll_automatically_when_it_overflows.riv',
                    marquee: true,
                    width: '35%',
                    displayMode: 'icon-text',
                    icon: fileIcon,
                    hover: true
                },
                {
                    label: 'Frame',
                    value: '125 / 300',
                    width: '25%',
                    displayMode: 'text',
                    icon: playIcon,
                    align: 'center',
                    hover: true
                },
                {
                    label: 'FPS',
                    value: '60',
                    width: '15%',
                    displayMode: 'text',
                    icon: gaugeIcon,
                    align: 'right',
                    hover: true
                },
                {
                    label: 'Time',
                    value: '2:34',
                    width: '25%',
                    displayMode: 'text',
                    icon: playIcon,
                    align: 'right',
                    hover: true
                }
            ]);
        }

        const statusBar3 = document.getElementById('statusBar3');
        if (statusBar3) {
            statusBar3.setFields && statusBar3.setFields([
                { label: 'Progress', value: '0%', width: '33%', icon: briefcaseIcon, hover: true },
                { label: 'Time', value: '00:00', width: '33%', icon: playIcon, hover: true },
                { label: 'Quality', value: 'High', width: '34%', icon: fadersIcon, hover: true }
            ]);
        }

        // Interactive controls for statusBar2
        const setupFieldControls = (fieldIndex, prefix) => {
            const displayEl = document.getElementById(`${prefix}Display`);
            const widthEl = document.getElementById(`${prefix}Width`);
            const alignEl = document.getElementById(`${prefix}Align`);
            const marqueeEl = document.getElementById(`${prefix}Marquee`);
            const hoverEl = document.getElementById(`${prefix}Hover`);
            const disabledEl = document.getElementById(`${prefix}Disabled`);

            if (displayEl) {
                displayEl.addEventListener('change', (e) => {
                    statusBar2.updateField(fieldIndex, { displayMode: e.target.value });
                    logEvent('statusBar2', 'field-update', { field: fieldIndex, displayMode: e.target.value });
                });
            }
            if (widthEl) {
                widthEl.addEventListener('change', (e) => {
                    statusBar2.updateField(fieldIndex, { width: e.target.value });
                    logEvent('statusBar2', 'field-update', { field: fieldIndex, width: e.target.value });
                });
            }
            if (alignEl) {
                alignEl.addEventListener('change', (e) => {
                    statusBar2.updateField(fieldIndex, { align: e.target.value });
                    logEvent('statusBar2', 'field-update', { field: fieldIndex, align: e.target.value });
                });
            }
            if (marqueeEl) {
                marqueeEl.addEventListener('change', (e) => {
                    statusBar2.updateField(fieldIndex, { marquee: e.target.checked });
                    logEvent('statusBar2', 'field-update', { field: fieldIndex, marquee: e.target.checked });
                });
            }
            if (hoverEl) {
                hoverEl.addEventListener('change', (e) => {
                    statusBar2.updateField(fieldIndex, { hover: e.target.checked });
                    logEvent('statusBar2', 'field-update', { field: fieldIndex, hover: e.target.checked });
                });
            }
            if (disabledEl) {
                disabledEl.addEventListener('change', (e) => {
                    statusBar2.setFieldDisabled(fieldIndex, e.target.checked);
                    logEvent('statusBar2', 'field-update', { field: fieldIndex, disabled: e.target.checked });
                });
            }
        };

        setupFieldControls(0, 'field1');
        setupFieldControls(1, 'field2');
        setupFieldControls(2, 'field3');
        setupFieldControls(3, 'field4');

        // Dynamic status bar controls
        const startProgressBtn = document.getElementById('startProgressBtn');
        const updateStatusBtn = document.getElementById('updateStatusBtn');
        let progressValue = 0;
        let progressInterval;

        if (startProgressBtn && statusBar3) {
            startProgressBtn.addEventListener('click', () => {
                if (progressInterval) {
                    clearInterval(progressInterval);
                    progressInterval = null;
                }

                progressValue = 0;
                let seconds = 0;

                statusBar3.updateFieldValue(0, '0%');
                statusBar3.updateFieldValue(1, '00:00');
                logEvent('statusBar3', 'progress-started');

                progressInterval = setInterval(() => {
                    progressValue += 5;
                    seconds += 1;

                    statusBar3.updateFieldValue(0, `${progressValue}%`);
                    statusBar3.updateFieldValue(1, `00:${seconds.toString().padStart(2, '0')}`);

                    if (progressValue >= 100) {
                        clearInterval(progressInterval);
                        progressInterval = null;
                        logEvent('statusBar3', 'progress-complete', { progress: progressValue, time: seconds });
                    }
                }, 200);
            });
        }

        if (updateStatusBtn && statusBar3) {
            updateStatusBtn.addEventListener('click', () => {
                const qualities = ['Low', 'Medium', 'High', 'Ultra'];
                const currentFields = statusBar3.fields || [];
                const currentQuality = currentFields[2]?.value || 'High';
                const currentIndex = qualities.indexOf(currentQuality);
                const nextIndex = (currentIndex + 1) % qualities.length;

                statusBar3.updateFieldValue(2, qualities[nextIndex]);
                logEvent('statusBar3', 'quality-changed', { quality: qualities[nextIndex] });
            });
        }

        logEvent('System', 'Demo initialized');
    </script>
    <script type="module" src="../js/utils/demo-color-picker.js"></script>
</body>
</html>
