<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TToastLit - Component Demo</title>
    <script src="../js/utils/accent-init.js"></script>
    <link rel="stylesheet" href="../css/demo-template.css">

    <style>
        html, body {
            overflow: visible !important;
        }
        #toastCounter {
            position: fixed;
            top: 70px;
            left: 20px;
            background: #000;
            border: 1px solid var(--terminal-green);
            padding: 10px;
            font-size: 12px;
            z-index: 9999;
        }
        /* Base button styling for .controls */
        button.controls {
            background: transparent;
            border: 1px solid var(--terminal-green);
            color: var(--terminal-green);
            padding: 8px 16px;
            font-family: var(--font-mono, 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        button.controls:hover {
            background: var(--terminal-green);
            color: var(--terminal-bg);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
        }
        button.controls:active {
            transform: scale(0.98);
        }
        /* Demo button variants */
        .demo-button.error {
            color: var(--terminal-red);
            border-color: var(--terminal-red);
        }
        .demo-button.error:hover {
            background: var(--terminal-red);
            color: var(--terminal-bg);
            box-shadow: 0 0 10px rgba(255, 0, 60, 0.3);
        }
        .demo-button.warning {
            color: var(--terminal-amber);
            border-color: var(--terminal-amber);
        }
        .demo-button.warning:hover {
            background: var(--terminal-amber);
            color: var(--terminal-bg);
            box-shadow: 0 0 10px rgba(255, 176, 0, 0.3);
        }
        .demo-button.info {
            color: var(--terminal-cyan);
            border-color: var(--terminal-cyan);
        }
        .demo-button.info:hover {
            background: var(--terminal-cyan);
            color: var(--terminal-bg);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--terminal-green);
            font-size: 12px;
            text-transform: uppercase;
        }
        .form-control {
            width: 100%;
            max-width: 400px;
            padding: 8px 12px;
            background: var(--terminal-bg);
            border: 1px solid var(--terminal-green);
            color: var(--terminal-green);
            font-family: inherit;
            font-size: 14px;
        }
        .form-control:focus {
            outline: none;
            box-shadow: 0 0 5px rgba(0, 255, 65, 0.5);
        }
    </style>
</head>
<body>
    <!-- Fixed Header -->
    <header class="demo-header">
        <div class="demo-header-content">
            <div class="demo-header-left">
                <h1>TToastLit</h1>
                <div class="breadcrumb">
                    <a href="index.html">← Components</a> / Toast
                </div>
            </div>
            <div class="demo-header-controls">
                <button class="header-btn" id="toggleLogBtn">▼ Event Log</button>
            </div>
        </div>
    </header>

    <div id="toastCounter">Active Toasts: <span id="activeCount">0</span></div>

    <!-- Main Content -->
    <div class="demo-container">
        <div class="component-section">
            <h2 class="component-title">Toast Component</h2>
            <p class="component-description">
                Notification toast with types, positions, durations, and auto-dismiss.
            </p>

            <h3>Basic Usage</h3>
            <div class="demo-grid">
                <div class="demo-item centered">
                    <button class="controls demo-button" onclick="showToast('Operation completed successfully!', 'success')">
                        Success Toast
                    </button>
                    <span class="demo-label">Success</span>
                </div>
                <div class="demo-item centered">
                    <button class="controls demo-button error" onclick="showToast('An error occurred!', 'error')">
                        Error Toast
                    </button>
                    <span class="demo-label">Error</span>
                </div>
                <div class="demo-item centered">
                    <button class="controls demo-button warning" onclick="showToast('Please review your input', 'warning')">
                        Warning Toast
                    </button>
                    <span class="demo-label">Warning</span>
                </div>
                <div class="demo-item centered">
                    <button class="controls demo-button info" onclick="showToast('New update available', 'info')">
                        Info Toast
                    </button>
                    <span class="demo-label">Info</span>
                </div>
            </div>

            <h3>Custom Configuration</h3>
            <div class="demo-grid wide">
                <div class="demo-item">
                    <div class="form-group">
                        <label for="customMessage">Message:</label>
                        <input type="text" id="customMessage" class="form-control" value="Custom toast message" />
                    </div>
                    <div class="form-group">
                        <label for="customType">Type:</label>
                        <select id="customType" class="form-control">
                            <option value="success">Success</option>
                            <option value="error">Error</option>
                            <option value="warning">Warning</option>
                            <option value="info" selected>Info</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="customDuration">Duration (ms) - 0 for manual dismiss:</label>
                        <input type="number" id="customDuration" class="form-control" value="3000" min="0" step="500" />
                    </div>
                    <div class="form-group">
                        <label for="customPosition">Position:</label>
                        <select id="customPosition" class="form-control">
                            <option value="top-right" selected>Top Right</option>
                            <option value="top-left">Top Left</option>
                            <option value="bottom-right">Bottom Right</option>
                            <option value="bottom-left">Bottom Left</option>
                        </select>
                    </div>
                    <button class="controls" onclick="showCustomToast()">Show Custom Toast</button>
                </div>
            </div>

            <h3>Advanced Examples</h3>
            <div class="demo-grid">
                <div class="demo-item centered">
                    <button class="controls" onclick="showPersistentToast()">
                        Persistent Toast
                    </button>
                    <span class="demo-label">Manual Dismiss</span>
                </div>
                <div class="demo-item centered">
                    <button class="controls" onclick="showClickableToast()">
                        Clickable Toast
                    </button>
                    <span class="demo-label">With Action</span>
                </div>
                <div class="demo-item centered">
                    <button class="controls" onclick="showSequentialToasts()">
                        Sequential Chain
                    </button>
                    <span class="demo-label">Multiple Steps</span>
                </div>
                <div class="demo-item centered">
                    <button class="controls" onclick="showMultipleToasts()">
                        Multiple Toasts
                    </button>
                    <span class="demo-label">Simultaneous</span>
                </div>
            </div>

            <h3>Position Demo</h3>
            <div class="demo-grid">
                <div class="demo-item centered">
                    <button class="controls" onclick="showToast('Top Right', 'info', 2000, 'top-right')">
                        Top Right
                    </button>
                </div>
                <div class="demo-item centered">
                    <button class="controls" onclick="showToast('Top Left', 'info', 2000, 'top-left')">
                        Top Left
                    </button>
                </div>
                <div class="demo-item centered">
                    <button class="controls" onclick="showToast('Bottom Right', 'info', 2000, 'bottom-right')">
                        Bottom Right
                    </button>
                </div>
                <div class="demo-item centered">
                    <button class="controls" onclick="showToast('Bottom Left', 'info', 2000, 'bottom-left')">
                        Bottom Left
                    </button>
                </div>
            </div>

            <div class="code-block">
                <code>&lt;!-- Create and show toast --&gt;
&lt;script&gt;
const toast = document.createElement('t-tst');
toast.message = 'Hello World!';
toast.type = 'success';
toast.show();
document.body.appendChild(toast);
&lt;/script&gt;

&lt;!-- Toast types: success, error, warning, info --&gt;
&lt;!-- Positions: top-right, top-left, bottom-right, bottom-left --&gt;

&lt;!-- API --&gt;
&lt;script&gt;
toast.message = 'Text';      // Message content
toast.type = 'success';      // Type/color
toast.duration = 3000;       // Auto-dismiss (0 = manual)
toast.position = 'top-right';// Screen position
toast.show();                // Show toast
toast.dismiss();             // Hide toast
&lt;/script&gt;

&lt;!-- Events --&gt;
&lt;script&gt;
toast.addEventListener('toast-show', (e) =&gt; {});
toast.addEventListener('toast-hide', (e) =&gt; {});
toast.addEventListener('toast-click', (e) =&gt; {});
toast.addEventListener('toast-dismiss', (e) =&gt; {});
&lt;/script&gt;</code>
            </div>
        </div>
    </div>

    <!-- Floating Event Log -->
    <div class="event-log-container collapsed" id="eventLogContainer">
        <div class="event-log-toggle">
            <h3><span class="toggle-icon">▲</span> Event Log</h3>
            <div class="event-log-controls">
                <span class="event-log-count">0</span>
                <button class="event-log-clear">Clear</button>
            </div>
        </div>
        <div class="event-log" id="eventLog"></div>
    </div>

    <script type="module">
        import '../js/components/TToastLit.js';

        // Event log functionality
        let eventCount = 0;
        const eventLog = document.getElementById('eventLog');
        const eventLogContainer = document.getElementById('eventLogContainer');
        const countEl = document.querySelector('.event-log-count');
        const toggleLogBtn = document.getElementById('toggleLogBtn');

        function logEvent(component, event, detail) {
            const entry = document.createElement('div');
            entry.className = 'event-entry';
            const timestamp = new Date().toLocaleTimeString();
            entry.textContent = `[${timestamp}] ${component}: ${event}${detail ? ' - ' + JSON.stringify(detail) : ''}`;
            eventLog.appendChild(entry);
            eventLog.scrollTop = eventLog.scrollHeight;
            eventCount++;
            countEl.textContent = eventCount;
        }

        // Toggle event log
        document.querySelector('.event-log-toggle').addEventListener('click', (e) => {
            if (e.target.closest('.event-log-clear')) return;
            eventLogContainer.classList.toggle('collapsed');
            toggleLogBtn.classList.toggle('active');
        });

        toggleLogBtn.addEventListener('click', () => {
            eventLogContainer.classList.toggle('collapsed');
            toggleLogBtn.classList.toggle('active');
        });

        // Clear log
        document.querySelector('.event-log-clear').addEventListener('click', (e) => {
            e.stopPropagation();
            eventLog.innerHTML = '';
            eventCount = 0;
            countEl.textContent = '0';
        });

        // Toast counter
        let toastIdCounter = 0;
        let activeToasts = new Set();

        function updateToastCount() {
            document.getElementById('activeCount').textContent = activeToasts.size;
        }

        function createToast(id) {
            const toast = document.createElement('t-tst');
            const toastId = id || `toast-${++toastIdCounter}`;
            toast.id = toastId;

            activeToasts.add(toastId);
            updateToastCount();

            toast.addEventListener('toast-show', () => {
                logEvent(toastId, 'toast-show');
            });

            toast.addEventListener('toast-hide', () => {
                logEvent(toastId, 'toast-hide');
                activeToasts.delete(toastId);
                updateToastCount();
                setTimeout(() => {
                    if (toast.parentNode) toast.remove();
                }, 100);
            });

            toast.addEventListener('toast-dismiss', () => {
                logEvent(toastId, 'toast-dismiss');
            });

            toast.addEventListener('toast-click', () => {
                logEvent(toastId, 'toast-click');
            });

            document.body.appendChild(toast);
            return toast;
        }

        window.showToast = (message, type = 'info', duration = 3000, position = 'top-right') => {
            const toast = createToast();
            toast.message = message;
            toast.type = type;
            toast.duration = duration;
            toast.position = position;
            toast.show();
            return toast;
        };

        window.showCustomToast = () => {
            const message = document.getElementById('customMessage').value;
            const type = document.getElementById('customType').value;
            const duration = parseInt(document.getElementById('customDuration').value);
            const position = document.getElementById('customPosition').value;

            if (!message) {
                alert('Please enter a message');
                return;
            }

            window.showToast(message, type, duration, position);
        };

        window.showPersistentToast = () => {
            const toast = createToast('persistent-toast');
            toast.message = 'This toast will not auto-dismiss. Click the X to close it.';
            toast.type = 'warning';
            toast.duration = 0;
            toast.position = 'top-right';
            toast.show();
        };

        window.showClickableToast = () => {
            const toast = createToast('clickable-toast');
            toast.message = 'Click me to perform an action!';
            toast.type = 'info';
            toast.duration = 5000;
            toast.position = 'top-right';

            toast.addEventListener('toast-click', () => {
                alert('Toast was clicked!');
                toast.dismiss();
            });

            toast.show();
        };

        window.showSequentialToasts = async () => {
            const steps = [
                { message: 'Initializing...', type: 'info', duration: 1000 },
                { message: 'Loading resources...', type: 'info', duration: 1000 },
                { message: 'Processing data...', type: 'warning', duration: 1000 },
                { message: 'Finalizing...', type: 'info', duration: 1000 },
                { message: 'Process complete!', type: 'success', duration: 2000 }
            ];

            for (let i = 0; i < steps.length; i++) {
                const step = steps[i];
                const toast = createToast(`sequential-${i + 1}`);
                toast.message = step.message;
                toast.type = step.type;
                toast.duration = step.duration;
                toast.position = 'top-right';
                toast.show();

                await new Promise(resolve => {
                    toast.addEventListener('toast-hide', resolve, { once: true });
                });

                if (i < steps.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 200));
                }
            }
        };

        window.showMultipleToasts = () => {
            const positions = ['top-right', 'top-left', 'bottom-right', 'bottom-left'];
            const types = ['success', 'error', 'warning', 'info'];

            positions.forEach((position, index) => {
                setTimeout(() => {
                    window.showToast(
                        `Toast at ${position.replace('-', ' ')}`,
                        types[index],
                        3000,
                        position
                    );
                }, index * 200);
            });
        };

        logEvent('System', 'Demo initialized');
    </script>
    <script type="module" src="../js/utils/demo-color-picker.js"></script>
</body>
</html>
