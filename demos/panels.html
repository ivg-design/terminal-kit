<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal Panels - Component Demo</title>

    <!-- Terminal theme CSS with scrollbar styling -->
    <link rel="stylesheet" href="../css/theme/terminal.css">

    <style>
        html,
        body {
            width: 100%;
            height: auto !important;
            overflow: visible !important;
        }

        body {
            background: #0a0a0a;
            color: #00ff41;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
            opacity: 0;
            transition: opacity 0.2s ease-in;
        }

        body.ready {
            opacity: 1;
        }

        .breadcrumb {
            margin-bottom: 30px;
            font-size: 12px;
            color: var(--terminal-green-dim);
        }

        .breadcrumb a {
            color: var(--terminal-green-dim);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            color: var(--terminal-green);
        }

        h1 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #00ff41;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .demo-section {
            margin-bottom: 100px;
        }

        .demo-title {
            color: #00ff41;
            margin: 30px 0 15px 0;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            opacity: 0.8;
        }

        .demo-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        /* Control row styles for nested demos */
        .control-row {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            align-items: center;
            flex-wrap: wrap;
        }

        .control-row > * {
            flex: 0 0 auto;
        }

        .compact-toggle-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: #1a1a1a;
            padding: 10px;
            border: 1px solid #00ff41;
        }

        /* Highlight nested panels */
        .nested-highlight t-pnl {
            border-left: 2px solid rgba(0, 255, 65, 0.3);
            margin-left: 10px;
        }

        /* Spacing for panel demo sections */
        .panel-demo {
            margin-bottom: 40px;
        }
    </style>
</head>

<body>
    <div class="breadcrumb">
        <a href="index.html">‚Üê Back to Gallery</a> / Panels
    </div>

    <h1>
        <span>Terminal Panels Component Demo</span>
    </h1>

    <!-- Size Mode Selector -->
    <div class="compact-toggle-container">
        <label style="color: #00ff41; margin-right: 10px; font-size: 12px;">SIZE:</label>
        <t-drp id="sizeMode" search="false" value="standard" style="min-width: 120px;"></t-drp>
    </div>

    <!-- SECTION 1: Basic Panel Modes -->
    <div class="demo-section">
        <h2 class="demo-title">1. Panel Modes (Presets of Features)</h2>
        <p style="margin-bottom: 20px; opacity: 0.7; font-size: 13px;">
            Modes are just presets that enable different panel features: header, footer, status bar, etc.
        </p>

        <!-- Mode: with-header (default) -->
        <div class="panel-demo">
            <h3 style="color: #00ff41; font-size: 14px; margin: 20px 0 10px 0; opacity: 0.8;">Mode: with-header</h3>
            <t-pnl title="Panel with Header and Actions" mode="with-header">
            <div slot="actions">
                <t-btn type="icon" size="xs" title="Settings"></t-btn>
                <t-btn type="icon" size="xs" title="Refresh"></t-btn>
                <t-btn type="icon" size="xs" title="Close"></t-btn>
            </div>
            <p>This panel has action buttons in the header for quick access to common functions.</p>
            <div class="control-row">
                <t-btn>Button</t-btn>
                <t-inp placeholder="Input field" value="Sample text"></t-inp>
                <t-sld min="0" max="100" value="50"></t-sld>
            </div>
            </t-pnl>
        </div>

        <!-- Headless Panel -->
        <div class="panel-demo">
            <t-pnl mode="headless">
            <p>This is a headless panel - no header, just content area.</p>
            <div class="control-row">
                <t-tog label="Option A"></t-tog>
                <t-tog label="Option B"></t-tog>
                <t-drp search="false" placeholder="Select option">
                    <option value="1">Option 1</option>
                    <option value="2">Option 2</option>
                    <option value="3">Option 3</option>
                </t-drp>
            </div>
            </t-pnl>
        </div>

        <!-- Panel with Status Bar -->
        <div class="panel-demo">
            <t-pnl title="Panel with Status Bar" mode="with-status-bar">
            <p>This panel includes a status bar at the bottom.</p>
            <div class="control-row">
                <t-btn variant="primary">Primary</t-btn>
                <t-btn variant="danger">Danger</t-btn>
                <t-btn variant="success">Success</t-btn>
            </div>
            <div slot="status-bar">
                <t-status-bar>
                    <t-status-field label="Status" value="Ready"></t-status-field>
                    <t-status-field label="Count" value="42"></t-status-field>
                    <t-status-field label="Mode" value="Active"></t-status-field>
                </t-status-bar>
            </div>
        </t-pnl>
    </div>

    <!-- SECTION 2: Collapsible Panels -->
    <div class="demo-section">
        <h2 class="demo-title">2. Collapsible Panels</h2>

        <div class="panel-demo">
            <t-pnl title="Collapsible Panel (Click header to toggle)" mode="with-header" collapsible>
                <p>This panel can be collapsed by clicking the header or the collapse button.</p>
                <div class="control-row">
                    <t-inp placeholder="Name" size="small"></t-inp>
                    <t-inp placeholder="Email" size="small"></t-inp>
                    <t-btn size="small">Submit</t-btn>
                </div>
            </t-pnl>
        </div>

        <div class="panel-demo">
            <t-pnl title="Initially Collapsed Panel" mode="with-header" collapsible collapsed>
                <p>This panel starts in a collapsed state. Click to expand!</p>
                <t-ldr type="dots" message="Loading..."></t-ldr>
            </t-pnl>
        </div>
    </div>

    <!-- SECTION 3: Panel Variants -->
    <div class="demo-section">
        <h2 class="demo-title">3. Panel Variants</h2>

        <div class="panel-demo">
            <t-pnl title="Standard Non-Collapsible Panel" mode="with-header">
                <p>This is a regular panel without collapse functionality - just a standard container.</p>
            <div class="control-row">
                <t-tog label="Enable feature" size="small"></t-tog>
                <t-sld min="0" max="10" value="5" size="small"></t-sld>
            </div>
            </t-pnl>
        </div>

        <div class="panel-demo">
            <t-pnl title="Multiline Text Input Examples" mode="with-header" collapsible id="textareaPanel">
            <p>Various textarea and multiline input examples:</p>
            <div style="margin: 15px 0;">
                <label style="display: block; margin-bottom: 5px; font-size: 12px; color: #00ff41;">Simple Textarea:</label>
                <t-textarea placeholder="Enter your text here..." rows="4" style="width: 100%;"></t-textarea>
            </div>
            <div style="margin: 15px 0;">
                <label style="display: block; margin-bottom: 5px; font-size: 12px; color: #00ff41;">Code Editor (CSS):</label>
                <t-textarea placeholder="/* Enter CSS code */" rows="6" style="width: 100%; font-family: monospace;">/* Example CSS */
.panel {
  background: #1a1a1a;
  border: 1px solid #00ff41;
  padding: 10px;
}</t-textarea>
                <div style="text-align: right; margin-top: 5px; font-size: 11px; opacity: 0.7;">Line 6 | 12 words</div>
            </div>
            <div style="margin: 15px 0;">
                <label style="display: block; margin-bottom: 5px; font-size: 12px; color: #00ff41;">JSON Configuration:</label>
                <t-textarea placeholder='{ "key": "value" }' rows="5" style="width: 100%; font-family: monospace;">{
  "theme": "dark",
  "autoSave": true,
  "fontSize": 14
}</t-textarea>
            </div>
        </t-pnl>
    </div>

    <!-- SECTION 4: Nested Panels -->
    <div class="demo-section">
        <h2 class="demo-title">4. Nested Panels (Basic)</h2>

        <t-pnl title="Parent Panel" mode="with-header" collapsible>
            <p>Parent level content with nested child panels below.</p>
            <div class="control-row">
                <t-btn size="small">Parent Action</t-btn>
                <t-inp placeholder="Parent input" size="small"></t-inp>
            </div>

            <!-- Nested Child Panel -->
            <t-pnl title="Child Panel" mode="with-header" collapsible>
                <p>First level nested panel.</p>
                <div class="control-row">
                    <t-tog label="Child Option" size="xs"></t-tog>
                    <t-sld min="0" max="100" value="25" size="xs"></t-sld>
                </div>

                <!-- Grandchild Panel -->
                <t-pnl title="Grandchild Panel" mode="with-header" collapsible compact>
                    <p>Second level nested panel.</p>
                    <div class="control-row">
                        <t-btn size="xs">Tiny Button</t-btn>
                        <t-inp placeholder="Tiny input" size="xs"></t-inp>
                    </div>
                </t-pnl>
            </t-pnl>
        </t-pnl>
    </div>

    <!-- SECTION 5: Deep Nested Controls Demo -->
    <div class="demo-section nested-highlight">
        <h2 class="demo-title">5. Deep Nested Controls (6+ Levels with Controls at Every Level)</h2>

        <t-pnl title="Level 1: Application Settings" mode="with-header" collapsible id="level1">
            <div slot="actions">
                <t-btn variant="icon" size="xs"></t-btn>
                <t-btn variant="icon" size="xs"></t-btn>
            </div>
                            <div class="control-row">
                    <t-btn size="small" variant="primary">Save All</t-btn>
                    <t-btn size="small" variant="danger">Reset</t-btn>
                    <t-tog label="Auto-save" size="small"></t-tog>
                    <t-inp placeholder="App Name" value="MyApp" size="small"></t-inp>
                </div>

                <t-pnl title="Level 2: System Configuration" mode="with-header" collapsible id="level2">
                                            <div class="control-row">
                            <t-drp search="false" size="xs" placeholder="Theme">
                                <option value="dark">Dark</option>
                                <option value="light">Light</option>
                            </t-drp>
                            <t-drp search="false" size="xs" placeholder="Language">
                                <option value="en">English</option>
                                <option value="es">Spanish</option>
                            </t-drp>
                            <t-tog label="Notifications" size="xs"></t-tog>
                            <t-sld min="0" max="100" value="75" size="xs"></t-sld>
                        </div>

                        <t-pnl title="Level 3: Performance Tuning" mode="with-header" collapsible id="level3">
                            <div class="control-row">
                                <t-inp placeholder="CPU Limit %" value="80" size="xs"></t-inp>
                                <t-inp placeholder="Memory MB" value="2048" size="xs"></t-inp>
                                <t-tog label="Turbo" size="xs"></t-tog>
                                <t-btn size="xs" variant="success">Apply</t-btn>
                            </div>

                            <t-pnl title="Level 4: Advanced Settings" mode="with-header" collapsible id="level4">
                                <div class="control-row">
                                    <t-sld min="1" max="16" value="4" size="xs"></t-sld>
                                    <span style="font-size: 11px;">Threads</span>
                                    <t-tog label="HT" size="xs"></t-tog>
                                    <t-tog label="AVX" size="xs"></t-tog>
                                    <t-drp search="false" size="xs">
                                        <option>Low</option>
                                        <option>Normal</option>
                                        <option>High</option>
                                    </t-drp>
                                </div>

                                <t-pnl title="Level 5: GPU Configuration" mode="with-header" collapsible compact id="level5">
                                    <div class="control-row">
                                        <t-inp placeholder="VRAM" value="8GB" size="xs"></t-inp>
                                        <t-tog label="RT" size="xs"></t-tog>
                                        <t-tog label="DLSS" size="xs"></t-tog>
                                        <t-sld min="30" max="144" value="60" size="xs"></t-sld>
                                        <span style="font-size: 10px;">FPS</span>
                                    </div>

                                    <t-pnl title="Level 6: Shader Options (Deepest)" mode="with-header" collapsible compact id="level6">
                                        <div class="control-row">
                                            <t-tog label="VS" size="xs"></t-tog>
                                            <t-tog label="PS" size="xs"></t-tog>
                                            <t-tog label="GS" size="xs"></t-tog>
                                            <t-tog label="CS" size="xs"></t-tog>
                                            <t-btn size="xs" variant="minimal">Compile</t-btn>
                                            <t-clr value="#ff0080" size="xs"></t-clr>
                                        </div>
                                        <p style="font-size: 11px; margin-top: 10px;">
                                            This is level 6 - the deepest nesting level in this demo!
                                        </p>
                                    </t-pnl>
                                </t-pnl>
                            </t-pnl>
                        </t-pnl>
                    </t-pnl>
                </t-pnl>
            </t-pnl>
        </t-pnl>
    </div>

    <!-- SECTION 6: Mixed Content Panels -->
    <div class="demo-section">
        <h2 class="demo-title">6. Panels with Mixed Content</h2>

        <t-pnl title="Rich Content Panel" mode="with-header" collapsible>
            <h3>Multiple Control Types</h3>
            <div class="control-row">
                <t-btn>Action 1</t-btn>
                <t-btn variant="primary">Action 2</t-btn>
                <t-btn variant="danger">Delete</t-btn>
            </div>

            <div class="control-row">
                <t-inp placeholder="Search..." style="flex: 1;"></t-inp>
                <t-btn variant="icon"></t-btn>
            </div>

            <div class="control-row">
                <t-tog label="Option A" style="margin-right: 15px;"></t-tog>
                <t-tog label="Option B" style="margin-right: 15px;"></t-tog>
                <t-tog label="Option C"></t-tog>
            </div>

            <div class="control-row">
                <span>Volume:</span>
                <t-sld min="0" max="100" value="50" style="flex: 1;"></t-sld>
                <span>50%</span>
            </div>

            <div class="control-row">
                <t-drp search="false" placeholder="Select category">
                    <option>Category 1</option>
                    <option>Category 2</option>
                    <option>Category 3</option>
                </t-drp>
                <t-clr value="#00ff41"></t-clr>
                <t-ldr type="spinner" size="small"></t-ldr>
            </div>
            <div slot="footer" style="display: flex; justify-content: space-between; width: 100%; padding: 10px;">
                <span style="opacity: 0.7;">Footer content is optional</span>
                <t-btn size="xs" type="icon" variant="minimal" id="footerCloseBtn" icon='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path></svg>' title="Close Footer"></t-btn>
            </div>
        </t-pnl>
    </div>

    <!-- Include all component scripts -->
    <script type="module">
        // Import all components - they have their styles built-in via Shadow DOM
        import '../js/components/TPanel.js';
        import '../js/components/TButton.js';
        import '../js/components/TInput.js';
        import '../js/components/TSlider.js';
        import '../js/components/TToggle.js';
        import '../js/components/TDropdown.js';
        import '../js/components/TColorPicker.js';
        import '../js/components/TStatusBar.js';
        import '../js/components/TStatusField.js'; // Added for status bar fields
        import '../js/components/TLoader.js';
        import '../js/components/TTextarea.js'; // Added missing textarea
        import { arrowsClockwiseIcon, gearSixIcon, xIcon } from '../js/utils/phosphor-icons.js';

        // Wait for all components to be defined before showing the page
        Promise.all([
            customElements.whenDefined('t-pnl'),
            customElements.whenDefined('t-btn'),
            customElements.whenDefined('t-inp'),
            customElements.whenDefined('t-tog'),
            customElements.whenDefined('t-sld'),
            customElements.whenDefined('t-drp'),
            customElements.whenDefined('t-clr'),
            customElements.whenDefined('t-ldr'),
            customElements.whenDefined('t-textarea')
            // Note: t-status-bar might not be used on this page
        ]).then(() => {
            // All components are defined, show the page
            document.body.classList.add('ready');
        }).catch(err => {
            console.error('Error waiting for components:', err);
            // Show page anyway after error
            document.body.classList.add('ready');
        });

        // Also add a fallback timeout in case something goes wrong
        setTimeout(() => {
            document.body.classList.add('ready');
        }, 1000);

        // Add icons to buttons
        document.addEventListener('DOMContentLoaded', () => {
            // Add icons to the first panel's action buttons specifically
            const firstPanel = document.querySelector('t-pnl[title="Panel with Header and Actions"]');
            if (firstPanel) {
                const actionSlot = firstPanel.querySelector('[slot="actions"]');
                if (actionSlot) {
                    const buttons = actionSlot.querySelectorAll('t-btn');
                    buttons.forEach((btn, index) => {
                        if (btn.setIcon) {
                            // Set specific icons for each button
                            if (index === 0) btn.setIcon(gearSixIcon);      // Settings
                            else if (index === 1) btn.setIcon(arrowsClockwiseIcon); // Refresh
                            else if (index === 2) btn.setIcon(xIcon);       // Close
                        }
                    });
                }
            }

            // Add icons to other action buttons
            const otherActionButtons = document.querySelectorAll('t-pnl[id="level1"] [slot="actions"] t-btn');
            otherActionButtons.forEach((btn, index) => {
                if (btn.setIcon) {
                    btn.setIcon(index % 2 === 0 ? gearSixIcon : arrowsClockwiseIcon);
                }
            });

            // Initialize the size mode dropdown with options
            const sizeMode = document.getElementById('sizeMode');
            if (sizeMode && sizeMode.setOptions) {
                sizeMode.setOptions([
                    { value: 'large', label: 'Large' },
                    { value: 'standard', label: 'Standard' },
                    { value: 'compact', label: 'Compact' }
                ]);
            }

            // Size mode selector
            sizeMode.addEventListener('dropdown-change', (e) => {
                const mode = e.detail.value;
                const allPanels = document.querySelectorAll('t-pnl');
                const allButtons = document.querySelectorAll('t-btn');
                const allInputs = document.querySelectorAll('t-inp, t-txt');
                const allToggles = document.querySelectorAll('t-tog');
                const allSliders = document.querySelectorAll('t-sld');
                const allDropdowns = document.querySelectorAll('t-drp');

                // Update panels - set the size mode as data attribute
                allPanels.forEach(panel => {
                    panel.setAttribute('data-size-mode', mode);
                    if (mode === 'compact') {
                        panel.setAttribute('compact', '');
                    } else {
                        panel.removeAttribute('compact');
                    }
                    // Force action buttons to update
                    if (panel._updateActionButtons) {
                        panel._updateActionButtons();
                    }
                });

                // Update component sizes
                const sizeMap = {
                    'large': 'large',
                    'standard': 'medium',
                    'compact': 'small'
                };

                const componentSize = sizeMap[mode];

                [...allButtons, ...allInputs, ...allToggles, ...allSliders, ...allDropdowns].forEach(component => {
                    // Skip buttons in panel action slots - they're managed by the panel
                    if (component.tagName === 'T-BTN' && component.closest('[slot="actions"]')) {
                        return;
                    }

                    if (componentSize === 'medium') {
                        component.removeAttribute('size');
                    } else {
                        component.setAttribute('size', componentSize);
                    }
                });
            });

            // Footer close button
            const footerCloseBtn = document.getElementById('footerCloseBtn');
            if (footerCloseBtn) {
                footerCloseBtn.addEventListener('click', () => {
                    const panel = footerCloseBtn.closest('t-pnl');
                    if (panel && panel.toggleFooter) {
                        panel.toggleFooter();
                    }
                });
            }

            // Test programmatic control after a delay (removed logging)
        });
    </script>
</body>

</html>