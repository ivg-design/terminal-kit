<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TDropdownLit - Component Demo</title>

    <!-- Demo Template Styles -->
    <link rel="stylesheet" href="../css/demo-template.css">

    <style>
        .selection-display {
            background: var(--terminal-gray-darkest);
            border: 1px solid var(--terminal-gray-light);
            padding: 10px;
            margin-top: 10px;
            color: var(--terminal-green-dim);
            font-size: 11px;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="breadcrumb">
            <a href="index.html">&larr; Back to Gallery</a> / Dropdowns
        </div>

        <h1>TDropdownLit</h1>

        <div class="component-section">
            <h2 class="component-title">Nested Dropdown</h2>
            <p class="component-description">
                Dropdown with folder structure, search, metadata support, and multiple configuration options.
            </p>

            <h3>Basic Variants</h3>
            <div class="demo-grid wide">
                <div class="demo-item">
                    <span class="demo-label">Nested Folders with Search</span>
                    <t-drp id="dropdown1" placeholder="Select animation..."></t-drp>
                    <div class="selection-display" id="selection1">No selection</div>
                </div>

                <div class="demo-item">
                    <span class="demo-label">Flat List (No Folders)</span>
                    <t-drp id="dropdownFlat" placeholder="Select option..."></t-drp>
                </div>
            </div>

            <h3>Configuration Options</h3>
            <div class="demo-grid">
                <div class="demo-item">
                    <span class="demo-label">Without Icons</span>
                    <t-drp id="dropdownIcons" placeholder="Select option..." icons="false"></t-drp>
                </div>

                <div class="demo-item">
                    <span class="demo-label">Without Search Bar</span>
                    <t-drp id="dropdownNoSearch" placeholder="Select option..." search="false"></t-drp>
                </div>

                <div class="demo-item">
                    <span class="demo-label">Compact Size</span>
                    <t-drp id="dropdownCompact" placeholder="Select option..." compact="true"></t-drp>
                </div>

                <div class="demo-item">
                    <span class="demo-label">Disabled State</span>
                    <t-drp placeholder="Disabled dropdown" disabled></t-drp>
                </div>
            </div>

            <h3>Custom Widths</h3>
            <div class="demo-grid wide">
                <div class="demo-item">
                    <span class="demo-label">Wide Dropdown (600px)</span>
                    <t-drp id="dropdownWide" placeholder="Select from a wide dropdown..." width="600px"></t-drp>
                </div>

                <div class="demo-item">
                    <span class="demo-label">Narrow Dropdown (200px)</span>
                    <t-drp id="dropdownNarrow" placeholder="Select..." width="200px"></t-drp>
                </div>
            </div>

            <div class="code-block">
                <code>&lt;!-- Basic dropdown with nested folders --&gt;
&lt;t-drp id="dropdown1" placeholder="Select..."&gt;&lt;/t-drp&gt;

&lt;!-- Without search or icons --&gt;
&lt;t-drp search="false" icons="false"&gt;&lt;/t-drp&gt;

&lt;!-- Compact mode --&gt;
&lt;t-drp compact="true"&gt;&lt;/t-drp&gt;

&lt;!-- Custom width --&gt;
&lt;t-drp width="400px"&gt;&lt;/t-drp&gt;

&lt;!-- Disabled state --&gt;
&lt;t-drp disabled&gt;&lt;/t-drp&gt;

&lt;!-- JavaScript API --&gt;
&lt;script&gt;
  const dropdown = document.querySelector('t-drp');

  // Load nested data structure
  dropdown.loadData({
    folders: {
      'Category A': {
        files: ['item1.riv', 'item2.riv']
      },
      'Category B': {
        folders: {
          'Subcategory': {
            files: ['nested.riv']
          }
        }
      }
    },
    files: ['root_item.riv']
  });

  // Add metadata for items
  dropdown.setMetadata({
    'item1.riv': { description: 'Description text' }
  });

  // Listen for selection changes
  dropdown.addEventListener('dropdown-change', (e) =&gt; {
    console.log('Selected:', e.detail);
  });
&lt;/script&gt;</code>
            </div>
        </div>

        <div class="event-log" id="eventLog">
            <h3>Event Log</h3>
        </div>
    </div>

    <script type="module">
        import '../js/components/TDropdownLit.js';

        const eventLog = document.getElementById('eventLog');

        function logEvent(component, event, detail) {
            const entry = document.createElement('div');
            entry.className = 'event-entry';
            const timestamp = new Date().toLocaleTimeString();
            entry.textContent = `[${timestamp}] ${component}: ${event} ${detail ? '- ' + JSON.stringify(detail) : ''}`;
            eventLog.appendChild(entry);
            eventLog.scrollTop = eventLog.scrollHeight;
        }

        // Demo data with nested folders
        const demoData = {
            folders: {
                'Characters': {
                    folders: {
                        'Heroes': {
                            files: ['knight.riv', 'wizard.riv', 'archer.riv']
                        },
                        'Enemies': {
                            files: ['goblin.riv', 'dragon.riv', 'skeleton.riv']
                        }
                    },
                    files: ['npc_merchant.riv', 'npc_guard.riv']
                },
                'Effects': {
                    folders: {
                        'Magic': {
                            files: ['fireball.riv', 'lightning.riv', 'heal.riv']
                        },
                        'Physical': {
                            files: ['slash.riv', 'impact.riv', 'explosion.riv']
                        }
                    },
                    files: ['sparkle.riv', 'smoke.riv']
                },
                'UI': {
                    files: ['loading_spinner.riv', 'button_hover.riv', 'modal_transition.riv']
                }
            },
            files: ['intro.riv', 'credits.riv']
        };

        // Flat data for flat dropdown
        const flatData = {
            files: [
                'Option 1.riv',
                'Option 2.riv',
                'Option 3.riv',
                'Option 4.riv',
                'Very Long Option Name.riv'
            ]
        };

        // Dropdown configurations
        const dropdowns = [
            { id: 'dropdown1', label: 'Basic', data: demoData },
            { id: 'dropdownFlat', label: 'Flat', data: flatData },
            { id: 'dropdownIcons', label: 'NoIcons', data: demoData },
            { id: 'dropdownNoSearch', label: 'NoSearch', data: demoData },
            { id: 'dropdownCompact', label: 'Compact', data: demoData },
            { id: 'dropdownWide', label: 'Wide', data: demoData },
            { id: 'dropdownNarrow', label: 'Narrow', data: flatData }
        ];

        // Initialize dropdowns
        dropdowns.forEach(({ id, label, data }) => {
            const dropdown = document.getElementById(id);
            if (dropdown) {
                setTimeout(() => {
                    if (dropdown.loadData) {
                        dropdown.loadData(data);

                        // Add metadata for main dropdowns
                        if (id === 'dropdown1' || id === 'dropdownWide') {
                            dropdown.setMetadata({
                                'knight.riv': { description: 'Armored knight with sword animations' },
                                'wizard.riv': { description: 'Magic user with spells' },
                                'fireball.riv': { description: 'Fire projectile effect' }
                            });
                        }
                    }
                }, 100);

                // Event listener
                dropdown.addEventListener('dropdown-change', (e) => {
                    logEvent(label, 'dropdown-change', e.detail);

                    // Update selection display for main dropdown
                    if (id === 'dropdown1') {
                        const display = document.getElementById('selection1');
                        if (display) {
                            display.textContent = e.detail.label || e.detail.value || 'No selection';
                        }
                    }
                });
            }
        });

        setTimeout(() => {
            logEvent('System', 'Demo initialized');
        }, 200);
    </script>
</body>
</html>
