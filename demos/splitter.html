<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSplitterLit Component Demo</title>
    <!-- Prism.js for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700&display=swap');

        :root {
            --terminal-green: #00ff41;
            --terminal-green-dim: #00cc33;
            --terminal-amber: #ffb000;
            --terminal-red: #ff003c;
            --terminal-cyan: #00ffff;
            --terminal-gray: #666;
            --terminal-gray-dark: #333;
            --terminal-gray-darkest: #1a1a1a;
            --terminal-bg: #0a0a0a;
            --terminal-black: #0a0a0a;
            --font-mono: 'JetBrains Mono', 'Courier New', monospace;
        }

        body {
            background: var(--terminal-bg);
            color: var(--terminal-green);
            font-family: var(--font-mono);
            padding: 40px;
            margin: 0;
            line-height: 1.6;
        }

        h1, h2 {
            color: var(--terminal-green);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        h1 {
            border-bottom: 2px solid var(--terminal-green);
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        h2 {
            margin-top: 50px;
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        .description {
            color: var(--terminal-gray);
            margin-bottom: 40px;
        }

        .demo-section {
            margin-bottom: 40px;
        }

        .demo-row {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .demo-label {
            font-size: 11px;
            color: var(--terminal-gray);
            text-transform: uppercase;
            margin-top: 10px;
        }

        button {
            background: transparent;
            border: 1px solid var(--terminal-green);
            color: var(--terminal-green);
            padding: 8px 16px;
            font-family: var(--font-mono);
            font-size: 12px;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.2s;
        }

        button:hover {
            background: var(--terminal-green);
            color: var(--terminal-black);
        }

        .event-log {
            background: #111;
            border: 1px solid #333;
            padding: 15px;
            font-size: 12px;
            max-height: 150px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .event-log p {
            margin: 5px 0;
            color: var(--terminal-green);
        }

        .event-log .timestamp {
            color: var(--terminal-gray);
        }

        .controls {
            background: rgba(0, 255, 65, 0.05);
            border: 1px solid var(--terminal-green);
            padding: 20px;
            margin-bottom: 20px;
        }

        .control-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        /* Demo pane content styling */
        .pane-content {
            padding: 20px;
            height: 100%;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .pane-content h3 {
            margin: 0 0 10px 0;
            color: var(--terminal-green);
            font-size: 14px;
            text-transform: uppercase;
        }

        .pane-content p {
            margin: 0;
            color: var(--terminal-gray);
            font-size: 12px;
        }

        .splitter-container {
            border: 1px solid var(--terminal-gray-dark);
            background: var(--terminal-gray-darkest);
        }

        .file-tree {
            font-size: 12px;
            color: var(--terminal-green-dim);
        }

        .file-tree .folder {
            color: var(--terminal-amber);
        }

        .file-tree .file {
            color: var(--terminal-green);
            margin-left: 15px;
        }

        .editor-content {
            font-size: 11px;
            color: var(--terminal-cyan);
            white-space: pre;
            overflow: auto;
        }

        .terminal-output {
            font-size: 11px;
            color: var(--terminal-green);
            white-space: pre;
        }

        /* IDE Layout Panes - consistent padding/margins */
        .ide-pane {
            display: flex;
            flex-direction: column;
            height: 100%;
            box-sizing: border-box;
            overflow: hidden;
        }

        .ide-pane-header {
            padding: 8px 12px;
            font-size: 11px;
            text-transform: uppercase;
            color: var(--terminal-green);
            background: var(--terminal-gray-darkest);
            border-bottom: 1px solid var(--terminal-gray-dark);
            flex-shrink: 0;
        }

        .ide-pane t-tree {
            flex: 1;
            min-height: 0;
            overflow: auto;
        }

        .ide-pane t-textarea {
            flex: 1;
            min-height: 0;
            --textarea-min-height: 100%;
        }

        /* Ensure consistent scrollbar alignment in IDE panes */
        .file-explorer-pane,
        .editor-pane,
        .terminal-pane {
            padding: 0;
        }
    </style>
</head>
<body>
    <h1>TSplitterLit Component Demo</h1>
    <p class="description">
        Resizable panel splitter with drag-to-resize, collapsible panes, and persistent state.<br>
        <strong>All panes are collapsible by default:</strong> Double-click gutter to collapse, double-click again to restore to default.
        Drag to edge to collapse, drag away from edge to uncollapse. Set <code>min-sizes</code> to prevent collapse.
    </p>

    <!-- Basic Horizontal Splitter -->
    <div class="demo-section">
        <h2>Horizontal Splitter (Default - Collapsible)</h2>
        <div class="splitter-container" style="height: 250px;">
            <t-split id="basic-splitter">
                <div slot="pane-0" class="pane-content">
                    <h3>Left Panel</h3>
                    <p>Double-click gutter to collapse this pane.</p>
                    <p>Drag to edge to collapse. Drag back to uncollapse.</p>
                </div>
                <div slot="pane-1" class="pane-content">
                    <h3>Right Panel</h3>
                    <p>Double-click on collapsed splitter to restore defaults.</p>
                    <p>All panes collapsible by default!</p>
                </div>
            </t-split>
        </div>
        <p class="demo-label">Default 50/50 split - try double-click and drag-to-collapse</p>
    </div>

    <!-- Vertical Splitter -->
    <div class="demo-section">
        <h2>Vertical Splitter</h2>
        <div class="splitter-container" style="height: 300px;">
            <t-split id="vertical-splitter" orientation="vertical">
                <div slot="pane-0" class="pane-content">
                    <h3>Top Panel</h3>
                    <p>Vertical orientation stacks panels top-to-bottom.</p>
                </div>
                <div slot="pane-1" class="pane-content">
                    <h3>Bottom Panel</h3>
                    <p>Drag the horizontal gutter to resize.</p>
                </div>
            </t-split>
        </div>
    </div>

    <!-- Custom Sizes -->
    <div class="demo-section">
        <h2>Custom Initial Sizes</h2>
        <div class="splitter-container" style="height: 200px;">
            <t-split id="custom-sizes" sizes="[30, 70]">
                <div slot="pane-0" class="pane-content">
                    <h3>Sidebar (30%)</h3>
                    <p>Narrower sidebar panel.</p>
                </div>
                <div slot="pane-1" class="pane-content">
                    <h3>Main Content (70%)</h3>
                    <p>Wider main content area.</p>
                </div>
            </t-split>
        </div>
        <p class="demo-label">30/70 split</p>
    </div>

    <!-- Collapsible Panels -->
    <div class="demo-section">
        <h2>Collapsible Panels</h2>
        <div class="controls">
            <div class="control-row">
                <button onclick="toggleCollapseLeft()">Toggle Left</button>
                <button onclick="toggleCollapseRight()">Toggle Right</button>
                <button onclick="resetCollapsible()">Reset</button>
            </div>
        </div>
        <div class="splitter-container" style="height: 250px;">
            <t-split id="collapsible-splitter" collapsible="[true, true]">
                <div slot="pane-0" class="pane-content">
                    <h3>Collapsible Left</h3>
                    <p>Click the arrows on the gutter or use the buttons above.</p>
                </div>
                <div slot="pane-1" class="pane-content">
                    <h3>Collapsible Right</h3>
                    <p>Both panels can be collapsed in this example.</p>
                </div>
            </t-split>
        </div>
    </div>

    <!-- IDE Layout Example -->
    <div class="demo-section">
        <h2>IDE Layout Example</h2>
        <div class="splitter-container" style="height: 450px;">
            <t-split id="ide-main" sizes="[20, 80]" collapsible="[true, false]">
                <div slot="pane-0" class="ide-pane file-explorer-pane">
                    <div class="ide-pane-header">File Explorer</div>
                    <t-tree id="file-tree" selectable="single" expand-on-click></t-tree>
                </div>
                <div slot="pane-1" style="height: 100%;">
                    <t-split id="ide-editor" orientation="vertical" sizes="[70, 30]" collapsible="[false, true]">
                        <div slot="pane-0" class="ide-pane editor-pane">
                            <div class="ide-pane-header">Editor - app.js</div>
                            <t-textarea
                                id="code-editor"
                                code-mode
                                show-line-numbers
                                language="javascript"
                                rows="15"
                            ></t-textarea>
                        </div>
                        <div slot="pane-1" class="ide-pane terminal-pane">
                            <div class="ide-pane-header">Terminal</div>
                            <t-textarea
                                id="terminal-output"
                                code-mode
                                rows="6"
                                readonly
                            ></t-textarea>
                        </div>
                    </t-split>
                </div>
            </t-split>
        </div>
        <p class="demo-label">Nested splitters with TTreeLit and syntax-highlighted editor</p>
    </div>

    <!-- Min/Max Sizes -->
    <div class="demo-section">
        <h2>Minimum Sizes</h2>
        <div class="splitter-container" style="height: 200px;">
            <t-split id="min-sizes" min-sizes="[100, 150]">
                <div slot="pane-0" class="pane-content">
                    <h3>Min 100px</h3>
                    <p>Can't resize smaller than 100px.</p>
                </div>
                <div slot="pane-1" class="pane-content">
                    <h3>Min 150px</h3>
                    <p>Can't resize smaller than 150px.</p>
                </div>
            </t-split>
        </div>
        <p class="demo-label">Minimum sizes prevent over-collapsing</p>
    </div>

    <!-- Custom Gutter Size -->
    <div class="demo-section">
        <h2>Custom Gutter Size</h2>
        <div class="demo-row">
            <div style="flex: 1;">
                <div class="splitter-container" style="height: 150px;">
                    <t-split gutter-size="4">
                        <div slot="pane-0" class="pane-content">
                            <p>4px gutter</p>
                        </div>
                        <div slot="pane-1" class="pane-content">
                            <p>Thin separator</p>
                        </div>
                    </t-split>
                </div>
                <p class="demo-label">Thin (4px)</p>
            </div>
            <div style="flex: 1;">
                <div class="splitter-container" style="height: 150px;">
                    <t-split gutter-size="16">
                        <div slot="pane-0" class="pane-content">
                            <p>16px gutter</p>
                        </div>
                        <div slot="pane-1" class="pane-content">
                            <p>Wide separator</p>
                        </div>
                    </t-split>
                </div>
                <p class="demo-label">Wide (16px)</p>
            </div>
        </div>
    </div>

    <!-- Programmatic Control -->
    <div class="demo-section">
        <h2>Programmatic Control</h2>
        <div class="controls">
            <div class="control-row">
                <button onclick="setSizes25_75()">Set 25/75</button>
                <button onclick="setSizes50_50()">Set 50/50</button>
                <button onclick="setSizes75_25()">Set 75/25</button>
            </div>
        </div>
        <div class="splitter-container" style="height: 200px;">
            <t-split id="programmatic-splitter">
                <div slot="pane-0" class="pane-content">
                    <h3>Left</h3>
                    <p>Use buttons to change sizes.</p>
                </div>
                <div slot="pane-1" class="pane-content">
                    <h3>Right</h3>
                    <p>Sizes are set programmatically.</p>
                </div>
            </t-split>
        </div>
    </div>

    <!-- Event Log -->
    <div class="demo-section">
        <h2>Event Log</h2>
        <div class="event-log" id="event-log">
            <p><span class="timestamp">[LOG]</span> Resize panels to see events...</p>
        </div>
    </div>

    <script type="module">
        import '../js/components/TSplitterLit.js';
        import '../js/components/TTreeLit.js';
        import '../js/components/TTextareaLit.js';

        // IDE file tree data
        const fileTreeNodes = [
            {
                id: 'src',
                label: 'src',
                children: [
                    { id: 'src/index.js', label: 'index.js' },
                    { id: 'src/app.js', label: 'app.js' },
                    { id: 'src/utils.js', label: 'utils.js' }
                ]
            },
            {
                id: 'tests',
                label: 'tests',
                children: [
                    { id: 'tests/index.test.js', label: 'index.test.js' },
                    { id: 'tests/app.test.js', label: 'app.test.js' }
                ]
            },
            {
                id: 'docs',
                label: 'docs',
                children: [
                    { id: 'docs/README.md', label: 'README.md' }
                ]
            }
        ];

        // Sample code content
        const sampleCode = `// app.js
import { LitElement, html, css } from 'lit';

class MyApp extends LitElement {
  static tagName = 'my-app';

  static styles = css\`
    :host {
      display: block;
      padding: 20px;
    }
  \`;

  render() {
    return html\`
      <div class="container">
        <h1>Hello World</h1>
      </div>
    \`;
  }
}

export default MyApp;`;

        // Terminal output
        const terminalOutput = `$ npm run dev
Starting development server...
Server running at http://localhost:3000
âœ“ Ready in 245ms

$ _`;

        // Initialize IDE components
        const fileTree = document.getElementById('file-tree');
        const codeEditor = document.getElementById('code-editor');
        const terminal = document.getElementById('terminal-output');

        if (fileTree) {
            fileTree.nodes = fileTreeNodes;
            fileTree.expanded = ['src', 'tests', 'docs'];
        }

        if (codeEditor) {
            codeEditor.value = sampleCode;
        }

        if (terminal) {
            terminal.value = terminalOutput;
        }

        const eventLog = document.getElementById('event-log');

        function logEvent(splitterId, event) {
            const timestamp = new Date().toLocaleTimeString();
            const p = document.createElement('p');
            const detail = event.detail ? JSON.stringify(event.detail) : 'N/A';
            p.innerHTML = `<span class="timestamp">[${timestamp}]</span> ${splitterId}: ${event.type} - ${detail}`;
            eventLog.insertBefore(p, eventLog.firstChild);
        }

        // Listen to events on all splitters
        document.querySelectorAll('t-split').forEach(splitter => {
            splitter.addEventListener('resize', (e) => logEvent(splitter.id || 'splitter', e));
            splitter.addEventListener('resize-start', (e) => logEvent(splitter.id || 'splitter', e));
            splitter.addEventListener('resize-end', (e) => logEvent(splitter.id || 'splitter', e));
            splitter.addEventListener('collapse', (e) => logEvent(splitter.id || 'splitter', e));
        });

        // Collapsible controls
        const collapsibleSplitter = document.getElementById('collapsible-splitter');

        window.toggleCollapseLeft = () => {
            collapsibleSplitter.toggleCollapse(0);
        };

        window.toggleCollapseRight = () => {
            collapsibleSplitter.toggleCollapse(1);
        };

        window.resetCollapsible = () => {
            collapsibleSplitter.reset();
        };

        // Programmatic size controls
        const programmaticSplitter = document.getElementById('programmatic-splitter');

        window.setSizes25_75 = () => {
            programmaticSplitter.setSizes([25, 75]);
        };

        window.setSizes50_50 = () => {
            programmaticSplitter.setSizes([50, 50]);
        };

        window.setSizes75_25 = () => {
            programmaticSplitter.setSizes([75, 25]);
        };
    </script>
</body>
</html>
