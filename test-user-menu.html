<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TUserMenuLit Test</title>
    <style>
        body {
            background: #0a0a0a;
            color: #00ff41;
            font-family: 'SF Mono', monospace;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border: 1px solid #00ff41;
            margin-bottom: 40px;
        }

        h1 {
            margin: 0;
        }

        .test-section {
            margin: 40px 0;
            padding: 20px;
            border: 1px solid #00cc33;
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        button {
            background: #1a1a1a;
            border: 1px solid #00ff41;
            color: #00ff41;
            padding: 8px 16px;
            cursor: pointer;
            font-family: inherit;
        }

        button:hover {
            background: #242424;
        }

        .event-log {
            margin-top: 20px;
            padding: 10px;
            background: #1a1a1a;
            border: 1px solid #333;
            min-height: 100px;
            max-height: 300px;
            overflow-y: auto;
            font-size: 12px;
        }

        .log-entry {
            margin: 2px 0;
            padding: 4px;
        }

        .log-entry.open { color: #00ff41; }
        .log-entry.close { color: #ff4136; }
        .log-entry.select { color: #0074d9; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>TUserMenuLit Component Test</h1>
            <t-usr id="headerMenu" user-name="John Doe" user-email="john@example.com"></t-usr>
        </header>

        <div class="test-section">
            <h2>Test 1: Basic User Menu</h2>
            <p>Default menu with user info</p>
            <t-usr id="test1" user-name="Alice Smith" user-email="alice@example.com"></t-usr>
        </div>

        <div class="test-section">
            <h2>Test 2: With Avatar</h2>
            <p>Menu with user avatar image</p>
            <t-usr id="test2" user-name="Bob Johnson"></t-usr>
        </div>

        <div class="test-section">
            <h2>Test 3: Custom Menu Items</h2>
            <p>Menu with custom items</p>
            <t-usr id="test3" user-name="Custom User"></t-usr>
        </div>

        <div class="test-section">
            <h2>Test 4: Disabled State</h2>
            <p>Disabled menu</p>
            <t-usr id="test4" user-name="Disabled User" disabled></t-usr>
        </div>

        <div class="test-section">
            <h2>Interactive Controls</h2>
            <div class="controls">
                <button onclick="openMenu()">Open Menu</button>
                <button onclick="closeMenu()">Close Menu</button>
                <button onclick="toggleMenu()">Toggle Menu</button>
                <button onclick="updateUserInfo()">Update User Info</button>
                <button onclick="setCustomItems()">Set Custom Items</button>
                <button onclick="toggleDisabled()">Toggle Disabled</button>
                <button onclick="clearLog()">Clear Log</button>
            </div>

            <div class="event-log" id="eventLog">
                <div class="log-entry">Event log started...</div>
            </div>
        </div>
    </div>

    <script type="module">
        import './js/components/TUserMenuLit.js';

        // Setup event logging
        function logEvent(message, type = '') {
            const log = document.getElementById('eventLog');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        // Setup all menus
        document.addEventListener('DOMContentLoaded', () => {
            // Header menu
            const headerMenu = document.getElementById('headerMenu');
            setupMenuEvents(headerMenu, 'Header');

            // Test 2 - with avatar
            const test2 = document.getElementById('test2');
            test2.userAvatar = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyMCIgY3k9IjIwIiByPSIyMCIgZmlsbD0iIzAwZmY0MSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjMDAwIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE2Ij5CSjwvdGV4dD48L3N2Zz4=';
            test2.userEmail = 'bob.johnson@example.com';
            setupMenuEvents(test2, 'Test2');

            // Test 3 - custom items
            const test3 = document.getElementById('test3');
            test3.setMenuItems([
                { id: 'dashboard', label: 'Dashboard' },
                { id: 'analytics', label: 'Analytics' },
                { type: 'separator' },
                { id: 'api-keys', label: 'API Keys' },
                { id: 'webhooks', label: 'Webhooks' },
                { type: 'separator' },
                { id: 'docs', label: 'Documentation' },
                { id: 'support', label: 'Support' },
                { type: 'separator' },
                { id: 'logout', label: 'Logout' }
            ]);
            setupMenuEvents(test3, 'Test3');

            // Test 4 - disabled
            setupMenuEvents(document.getElementById('test4'), 'Test4');

            logEvent('All menus initialized', 'open');
        });

        function setupMenuEvents(menu, name) {
            menu.addEventListener('menu-open', () => {
                logEvent(`${name} menu opened`, 'open');
            });

            menu.addEventListener('menu-close', () => {
                logEvent(`${name} menu closed`, 'close');
            });

            menu.addEventListener('menu-select', (e) => {
                logEvent(`${name} menu selected: ${e.detail.itemId}`, 'select');
            });
        }

        // Global functions for buttons
        window.openMenu = function() {
            const menu = document.getElementById('headerMenu');
            menu.openMenu();
            logEvent('Programmatically opened header menu', 'open');
        };

        window.closeMenu = function() {
            const menu = document.getElementById('headerMenu');
            menu.closeMenu();
            logEvent('Programmatically closed header menu', 'close');
        };

        window.toggleMenu = function() {
            const menu = document.getElementById('headerMenu');
            menu.toggleMenu();
            logEvent('Toggled header menu');
        };

        window.updateUserInfo = function() {
            const menu = document.getElementById('headerMenu');
            const names = ['Jane Doe', 'John Smith', 'Alice Cooper', 'Bob Dylan'];
            const emails = ['jane@example.com', 'john@example.com', 'alice@example.com', 'bob@example.com'];
            const randomIndex = Math.floor(Math.random() * names.length);

            menu.setUserInfo({
                name: names[randomIndex],
                email: emails[randomIndex]
            });

            logEvent(`Updated user to: ${names[randomIndex]}`, 'select');
        };

        window.setCustomItems = function() {
            const menu = document.getElementById('headerMenu');
            menu.setMenuItems([
                { id: 'home', label: 'Home' },
                { id: 'projects', label: 'My Projects' },
                { id: 'teams', label: 'Teams' },
                { type: 'separator' },
                { id: 'billing', label: 'Billing' },
                { id: 'usage', label: 'Usage Stats' },
                { type: 'separator' },
                { id: 'signout', label: 'Sign Out' }
            ]);
            logEvent('Set custom menu items', 'select');
        };

        window.toggleDisabled = function() {
            const menu = document.getElementById('headerMenu');
            menu.disabled = !menu.disabled;
            logEvent(`Menu ${menu.disabled ? 'disabled' : 'enabled'}`);
        };

        window.clearLog = function() {
            const log = document.getElementById('eventLog');
            log.innerHTML = '<div class="log-entry">Event log cleared...</div>';
        };
    </script>
</body>
</html>